# Corosync Cluster Engine Configuration
# Source: https://williamzujkowski.github.io/posts/proxmox-high-availability-homelab/
# Purpose: Configure cluster communication with ring redundancy
# Location: /etc/pve/corosync.conf

totem {
    version: 2
    cluster_name: homelab-cluster
    config_version: 3
    transport: knet
    crypto_cipher: aes256
    crypto_hash: sha256
}

nodelist {
    node {
        name: pve1
        nodeid: 1
        quorum_votes: 1
        ring0_addr: 10.0.10.11
        ring1_addr: 10.0.100.11
    }
    node {
        name: pve2
        nodeid: 2
        quorum_votes: 1
        ring0_addr: 10.0.10.12
        ring1_addr: 10.0.100.12
    }
    node {
        name: pve3
        nodeid: 3
        quorum_votes: 1
        ring0_addr: 10.0.10.13
        ring1_addr: 10.0.100.13
    }
}

quorum {
    provider: corosync_votequorum
}

logging {
    to_logfile: yes
    logfile: /var/log/corosync/corosync.log
    to_syslog: yes
    timestamp: on
}

# Apply changes with: systemctl restart pve-cluster corosync
